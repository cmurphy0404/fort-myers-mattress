---
import { siteConfig } from '../config';

const budgetOptions = [
  'Under $500',
  '$500 - $1,000',
  '$1,000 - $1,500',
  '$1,500 - $2,000',
  '$2,000+',
  'Not sure yet',
];
---

<form
  name="appointment"
  method="POST"
  data-netlify="true"
  netlify-honeypot="bot-field"
  action="/book?success=true"
  class="space-y-6"
>
  <!-- Netlify Hidden Fields -->
  <input type="hidden" name="form-name" value="appointment" />
  <p class="hidden">
    <label>Don't fill this out if you're human: <input name="bot-field" /></label>
  </p>

  <!-- Name -->
  <div>
    <label for="name" class="block text-sm font-medium text-gray-700 mb-2">
      Name <span class="text-red-500">*</span>
    </label>
    <input
      type="text"
      id="name"
      name="name"
      required
      autocomplete="name"
      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-accent transition-colors"
      placeholder="Your name"
    />
  </div>

  <!-- Phone -->
  <div>
    <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
      Phone <span class="text-red-500">*</span>
    </label>
    <input
      type="tel"
      id="phone"
      name="phone"
      required
      autocomplete="tel"
      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-accent transition-colors"
      placeholder="(239) 555-1234"
    />
  </div>

  <!-- Email (Optional) -->
  <div>
    <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
      Email <span class="text-gray-400">(optional)</span>
    </label>
    <input
      type="email"
      id="email"
      name="email"
      autocomplete="email"
      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-accent transition-colors"
      placeholder="your@email.com"
    />
  </div>

  <!-- Preferred Day/Time -->
  <div>
    <label for="preferred-time" class="block text-sm font-medium text-gray-700 mb-2">
      Preferred Day & Time <span class="text-red-500">*</span>
    </label>
    <input
      type="text"
      id="preferred-time"
      name="preferred-time"
      required
      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-accent transition-colors"
      placeholder="e.g., Saturday morning, Tuesday after 5pm"
    />
    <p class="mt-1 text-sm text-gray-500">We'll confirm your appointment by phone or text.</p>
  </div>

  <!-- Budget Range (Optional) -->
  <div>
    <label for="budget" class="block text-sm font-medium text-gray-700 mb-2">
      Budget Range <span class="text-gray-400">(optional)</span>
    </label>
    <select
      id="budget"
      name="budget"
      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-accent transition-colors bg-white"
    >
      <option value="">Select a range</option>
      {budgetOptions.map((option) => (
        <option value={option}>{option}</option>
      ))}
    </select>
  </div>

  <!-- Notes -->
  <div>
    <label for="notes" class="block text-sm font-medium text-gray-700 mb-2">
      Additional Notes <span class="text-gray-400">(optional)</span>
    </label>
    <textarea
      id="notes"
      name="notes"
      rows="3"
      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-accent transition-colors resize-none"
      placeholder="Tell us about your sleep preferences, any questions, etc."
    ></textarea>
  </div>

  <!-- Submit Button -->
  <button
    type="submit"
    class="w-full btn-primary text-lg py-4"
  >
    Request Appointment
  </button>

  <!-- Mailto Fallback -->
  <p class="text-center text-sm text-gray-500">
    Form not working? Email us at{' '}
    <a href={`mailto:${siteConfig.email}?subject=Appointment Request`} class="text-accent hover:underline">
      {siteConfig.email}
    </a>
  </p>
</form>
